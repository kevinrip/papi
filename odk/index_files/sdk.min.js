(function(r){var n={};function a(e){if(n[e]){return n[e].exports}var t=n[e]={i:e,l:false,exports:{}};r[e].call(t.exports,t,t.exports,a);t.l=true;return t.exports}a.m=r;a.c=n;a.d=function(e,t,r){if(!a.o(e,t)){Object.defineProperty(e,t,{enumerable:true,get:r})}};a.r=function(e){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(e,"__esModule",{value:true})};a.t=function(t,e){if(e&1)t=a(t);if(e&8)return t;if(e&4&&typeof t==="object"&&t&&t.__esModule)return t;var r=Object.create(null);a.r(r);Object.defineProperty(r,"default",{enumerable:true,value:t});if(e&2&&typeof t!="string")for(var n in t)a.d(r,n,function(e){return t[e]}.bind(null,n));return r};a.n=function(t){var e=t&&t.__esModule?function e(){return t["default"]}:function e(){return t};a.d(e,"a",e);return e};a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};a.p="/";return a(a.s=2)})([function(e,t,r){"use strict";var n=false||!!s()["af-sb-dev"];var a={};function i(e,t){if(n&&console){console.log("[AF-SB] - "+e,t)}}function o(e){console.error("[AppsFlyer Smart Banners SDK] - "+e)}function s(e){var t=e||location.search;try{return JSON.parse('{"'+decodeURI(t.substring(1).replace(/&/g,'","').replace(/=/g,'":"'))+'"}')}catch(e){return{}}}function l(t,r){if(t<0){throw new Error("Invalid argument count")}if(typeof r!=="function"){throw new Error("Invalid argument callback")}var n=[];return function(){var e=Array.prototype.slice.call(arguments);n.push(e);t=t-1;if(t===0){return r(n)}}}var u=/^([a-zA-Z0-9])([a-zA-Z0-9.+-]*):\/\/([^\s]+)?$/;function c(e){return u.test(e)}function f(e){var t=[];for(var r in e){if(e.hasOwnProperty(r)&&c(e[r])){t.push(e[r])}}return t}function d(e,t,r){var n=false;var a=function(){n=true;r&&r()};var i=window.setTimeout(a,e);return function(){window.clearTimeout(i);if(!n){t.apply(this,arguments)}}}function v(){return Object.assign({},a)}function g(e){if(e){a=Object.assign({},e)}}function p(){a={}}e.exports={after:l,pickUrlValues:f,log:i,error:o,timeLimitCallback:d,getUrlParamsObject:s,getAdditionalParams:v,setAdditionalParams:g,resetAdditionalParams:p,DEV_MODE:n}},function(e,t,r){"use strict";var o=r(0);var i=r(9);var s=r(10);var l="AF_FREQUENCY_CAPPING";var u="AF_BANNERS_DISMISSAL";var n="AF_TRACKING_ENABLED";var a="AF_BANNERS_ENABLED";var c="AF_BANNERS_SESSION_ID";var f="AF_BANNERS_URL_QUERY";var d="AF_BANNERS_URL_EXP";function v(){if(!B()){o.log("Can't init the session since tracking is disabled, run `AF.Banner.enableTracking()` to enable tracking and banners again.");return}if(!s.getItem(c)){s.setItem(c,(new Date).getTime().toString())}}function g(){var e=o.getUrlParamsObject();var t=Boolean(e["pid"]||e["utm_source"]);var r=i.getItem(d,{});if(t){i.setItem(f,location.search);i.setItem(d,(new Date).getTime()+72e5)}else if(r&&r<new Date){i.removeItem(d);i.removeItem(f)}}function p(e){var t=e.frequency_capping!==-1&&(i.getItem(l,{})[e.id]||0)>=e.frequency_capping;var r=false;var n=i.getItem(u,{})[e.id];if(n&&e.dismissal){switch(e.dismissal.type){case"never":r=true;break;case"period":r=(new Date).getTime()-n<e.dismissal.value;break;case"nextSession":var a=s.getItem(c);r=n===a;break;default:break}}return!t&&!r}function b(e){if(B()){var t=i.getItem(u,{});if(e.dismissal.type==="nextSession"){t[e.id]=s.getItem(c,"")}else{t[e.id]=(new Date).getTime()}i.setItem(u,t)}}function m(e,t){if(!t&&e.frequency_capping){var r=i.getItem(l,{});r[e.id]=(r[e.id]||0)+1;i.setItem(l,r)}}function y(e){var t=o.getUrlParamsObject(i.getItem(f,""));switch(e){case"utm":var r=t["utm_source"];var n=t["utm_campaign"];return Object.assign({},n?{c:n}:{},r?{pid:r}:{},{af_banner_build:"utm"});case"partner":case"forward":if(t["pid"]){return Object.assign({},t,{af_banner_build:"forward"})}else{return{af_banner_build:"static"}}case"banner":default:return{af_banner_build:"static"}}}var h={af_channel:"af_web_banner",pid:"af_banner"};var w=["af_banner","af_banner_sdk_ver"];function S(e,t){var r=e.attribution_method;var n=y(r);var a=Object.assign({},h,e.url.params,o.getAdditionalParams(),n);for(var i=0;i<w.length;i++){delete a[w[i]]}if(t){a["af-sb-preview"]=true}a["af_banner_sdk_ver"]="1";return Object.keys(a).map(function(e){return"&"+e+"="+a[e]}).join("")}function I(){i.removeItem(u);i.removeItem(l);s.removeItem(c)}function k(e){if(B()){o.log("Displaying banners is now "+(e?"enabled":"disabled"));i.setItem(a,e)}}function A(){return i.getItem(a,true)}function _(e){o.log("Tracking is now "+(e?"enabled":"disabled"));i.setItem(n,e)}function B(){return i.getItem(n,true)}function x(){return o.getUrlParamsObject()["af-sb-disable"]==="true"}e.exports={initSession:v,updateUrlQueryStorage:g,canDisplayBanner:p,updateBannerDismissalInfo:b,updateBannerFrequencyCapping:m,buildUrlQueryString:S,clearTrackingInfo:I,setBannersStatus:k,getBannersStatus:A,setTrackingStatus:_,getTrackingStatus:B,isSDKDisabled:x}},function(e,t,r){"use strict";var b=r(3);var m=r(0);var y=r(5);var h=r(6);var w=r(1);var S=r(11);var I=r(12);(function(){window.AF=window.AF||{};window.AF.Banner=window.AF.Banner||{};var o=window.AF._cleanupMethods=window.AF._cleanupMethods||[];var a=window.AF.Banner.webkey||"";var r=window.AF.Banner._q||[];var n={showBanner:l,hideBanner:u,disableBanners:d,enableBanners:v,disableTracking:g,enableTracking:p,getAdditionalParams:m.getAdditionalParams,setAdditionalParams:m.setAdditionalParams,version:"1.0.106"};window.AF.Banner=n;if(document.readyState==="complete"){e()}else{window.addEventListener("load",e)}function e(){w.initSession();w.updateUrlQueryStorage();var e=m.getUrlParamsObject()["af-sb-id"];if(e){l({creativeId:e,preview:true})}else{t()}}function t(){for(var e=0;e<r.length;e++){var t=r[e][0];if(t&&typeof n[t]==="function"){n[t].apply(null,r[e].slice(1))}}}function i(a,i){i=i||{};var e=function(e){if(e){m.error(e);u()}else{try{var t=h.render(a.creative,i);S.injectPixel(a);o.push(t);var r=document.body.querySelector("[data-af-cta-button]");var n=a.url.path+w.buildUrlQueryString(a,i.preview);document.body.querySelector("[data-af-close-button]").onclick=c(a,i.preview);r.setAttribute("data-af-cta-url",n);r.onclick=f(n);w.updateBannerFrequencyCapping(a,i.preview);m.resetAdditionalParams()}catch(e){u();m.error(e)}}};var t=y.prefetchAssets(a.creative.prefetch_urls,e);o.push(t)}function s(r,n){for(var a=0;a<r.length;a++){if(w.canDisplayBanner(r[a])&&r[a].creative_url){b.getBannerAsset(r[a].creative_url,function(e,t){if(!e&&t){i(Object.assign(r[a],{creative:t}),n)}});break}else{m.log("Banner ["+creatives[a].creativeId+"] could not be displayed due to it`s frequency cap or dismissal rules")}}}function l(n){if(!I.any&&!m.DEV_MODE){m.log("We detected a non-mobile browser, displaying banners in this browser is disabled.");return}if(!w.getTrackingStatus()){m.log("Displaying banners is disabled since tracking is disabled, run `AF.Banner.enableTracking()` to enable tracking and banners again.");return}if(!w.getBannersStatus()){m.log("Displaying banners is disabled, run `AF.Banner.enableBanners()` to enable banners again.");return}if(w.isSDKDisabled()){m.log("SDK is disabled by query param af-sb-disable.");return}u();n=n||{};m.setAdditionalParams(n.additionalParams);var e=n.webkey||a;if(!e){m.log("Webkey param must be provided for getting banners from the server");return}var t={webkey:e};var r=n.creativeId||n.bannerId;if(r){t.creativeId=r}if(n.preview){b.getBannerForPreview(t,function(e,r){if(!e&&r){b.getBannerAsset(r[0].creative_url,function(e,t){if(!e&&t){i(Object.assign(r[0],{creative:t}),n)}})}})}else{b.getBanners(t,function(e,t){if(!e&&t){s(t,n)}})}}function u(){if(o.length){m.log("Removing displayed banner from the page...");for(var e=0;e<o.length;e++){o[e]()}window.AF._cleanupMethods=o=[]}}function c(e,t){if(!t&&e.dismissal){return function(){w.updateBannerDismissalInfo(e);u()}}else{return u}}function f(e){return function(){window.location.href=e}}function d(){w.setBannersStatus(false);u()}function v(){w.setBannersStatus(true)}function g(){d();w.setTrackingStatus(false);w.clearTrackingInfo()}function p(){w.setTrackingStatus(true);v();w.initSession()}})()},function(e,t,r){"use strict";var a=r(0);var i=r(4);var o=false||"https://banner.appsflyer.com/";function n(r,n){if(r&&r.webkey){r["af-full-referer"]=window.location&&window.location.href;i.POST({url:o+"sb/"+r.webkey+"/creative/list",data:r},function(e,t){if(e||!t){a.log("Getting creatives for webkey ["+r.webkey+"] from the server... received, error: ",e);return n&&n(e)}a.log("Getting creatives for webkey ["+r.webkey+"] from the server... received: ",t);n&&n(null,t)})}else{a.log("Could not retrieve creatives, no webkey (mandatory) provided")}}function s(r,n){if(r&&r.webkey&&r.creativeId){i.GET({url:o+"sb/"+r.webkey+"/creative/"+r.creativeId+"/preview"},function(e,t){if(e||!t){a.log("Getting creative ["+r.creativeId+"] from the server... received, error: ",e);return n&&n(e)}a.log("Getting creative ["+r.creativeId+"] from the server... received: ",t);t&&n&&n(null,t)})}else{a.log("Could not retrieve creative, no creativeId/webkey (mandatory) provided")}}function l(r,n){i.GET({url:r},function(e,t){if(e||!t){a.log("Getting banner-creative asset asset ["+r+"] from the cdn... received error: ",e);return n(e)}a.log("Getting creative asset ["+r+"] from the cdn... received: ",t);n(null,t)})}e.exports={getBanners:n,getBannerForPreview:s,getBannerAsset:l}},function(e,t,r){"use strict";var i=r(0);function n(e,r){if(!e||!e.url||!e.method){return i.log("Cannot perform ajax request, received `options` object is missing required fields: [url, method]",e)}e=e||{};var n=new XMLHttpRequest;n.open(e.method,e.url,true);if(e.headers){var t=Object.keys(e.headers);for(var a=0;a<t.length;a++){n.setRequestHeader(t[a],e.headers[t[a]])}}n.onreadystatechange=function(){var e=n.status;var t=n.readyState;if(r&&t===XMLHttpRequest.DONE){if(e>=200&&e<400){return r(null,JSON.parse(n.responseText))}else{return r(new Error("error, got from server status: "+e))}}};n.send(JSON.stringify(e.data))}function a(e,t){e=e||{};e.method="POST";e.headers={"Content-type":"text/plain"};n(e,t)}function o(e,t){e=e||{};e.method="GET";n(e,t)}e.exports={GET:o,POST:a}},function(e,t,r){"use strict";var l=r(0);function i(e){if(!e){return null}for(var t=0;t<e.length;t++){if(e[t].length){return e[t][0]}}return null}var n=1e3*10;var o=l.getUrlParamsObject()["af-sb-timeout"]||n;function a(e,r){var n=false;var t=function(e){if(n){return}var t=i(e);if(t){r(t)}else{r()}};if(e.length===0){r()}else{var a=l.after(e.length,t);s(e,a,o)}return function(){n=true}}var s=function(e,t,r){for(var n=0;n<e.length;n++){var a=new Image(1,1);var i=function(e){if(e&&e.type==="error"){t("Failed fetching "+e.target.src)}else{t()}};var o=function(){t("Request timed out")};var s=l.timeLimitCallback(r,i,o);a.onload=s;a.onerror=s;a.src=e[n]}};e.exports={prefetchAssets:a}},function(e,t,r){"use strict";var n=r(0);var a=r(7).inject;function i(e,t){try{return a(e.layout,e.style,e.script,e.position,{mountTargetSelector:t.bannerContainerQuery,zIndex:t.bannerZIndex||2147483647})}catch(e){n.error(e.message);throw e}}e.exports={render:i}},function(e,t,r){e.exports={inject:r(8).inject}},function(e,t,r){"use strict";function g(r,n){return function(){if(r){for(var e=0;e<r.length;e++){var t=r[e];if(t.parentNode){t.parentNode.removeChild(t)}}}if(n){for(e=0;e<n.length;e++){n[e]()}}}}function p(e){return function(){if(e){e.style.transform=""}}}function b(e,t){var r=document.createElement(t||"div");r.innerHTML=e;return t?r:r.children[0]}function n(e,t,r,n,a){var i=[],o=[],s=a&&a.mountTargetSelector,l=a&&a.zIndex;if(!e||!t||!n){throw new Error("Failed to inject banner - missing arguments")}var u=b(e);if(typeof l==="number"){u.style.zIndex=l}var c=s&&document.querySelector(s)||document.body;if(t){var f=b(t,"style");document.head.insertBefore(f,document.head.firstChild);i.push(f)}switch(n){case"top":c.insertBefore(u,c.firstChild);i.push(u);break;case"top-sticky":u.style.position="fixed";u.style.top="0";u.style.right="0";u.style.left="0";c.insertBefore(u,c.firstChild);var d=document.createElement("div");d.style.height=u.offsetHeight+"px";c.insertBefore(d,u);i.push(u,d);break;case"bottom":u.style.position="fixed";u.style.bottom="0";u.style.right="0";u.style.left="0";c.appendChild(u);if(s&&!c.style.transform){c.style.transform="translate(0)";o.push(p(c))}var d=document.createElement("div");d.style.height=u.offsetHeight+"px";c.appendChild(d);i.push(u,d);break;case"splash":u.style.position="fixed";u.style.right="0";u.style.left="0";c.appendChild(u);if(s&&!c.style.transform){c.style.transform="translate(0)";o.push(p(c))}u.style.top="calc(50% - "+u.offsetHeight/2+"px)";i.push(u);break;default:break}if(r){var v=b(r,"script");document.body.appendChild(v);i.push(v)}return g(i,o)}e.exports={inject:n}},function(e,t,r){"use strict";var n=r(0);var a=i();function i(){var e="modernizr";try{localStorage.setItem(e,e);localStorage.removeItem(e);return true}catch(e){return false}}function o(e,t){if(!e){throw new Error("No storage key provided to storage.getItem")}if(!a){n.log("localStorage is not available, using the default value:",t);return t}var r=localStorage.getItem(e);if(r===null){return t}else{try{return JSON.parse(r)}catch(e){n.log("Failed to parse the stored value ["+r+"], using default value",t);return t}}}function s(e,t){if(!e){throw new Error("No storage key provided to storage.setItem")}if(!a){n.log("localStorage is not available.")}else{try{var r=Object.prototype.toString.call(t)==="[object Object]"?JSON.stringify(t):t;localStorage.setItem(e,r)}catch(e){n.log("storage.setItem failed.",e)}}}function l(e){if(!e){throw new Error("No storage key provided to storage.removeItem")}if(!a){n.log("localStorage is not available.")}else{localStorage.removeItem(e)}}e.exports={getItem:o,setItem:s,removeItem:l}},function(e,t,r){"use strict";var n=r(0);var a=i();function i(){var e="modernizr";try{sessionStorage.setItem(e,e);sessionStorage.removeItem(e);return true}catch(e){return false}}function o(e,t){if(!e){throw new Error("No storage key provided to session.getItem")}if(!a){n.log("sessionStorage is not available, using the default value:",t);return t}var r=sessionStorage.getItem(e);if(r===null){return t}else{try{return JSON.parse(r)}catch(e){n.log("Failed to parse the stored value ["+r+"], using default value",t);return t}}}function s(e,t){if(!e){throw new Error("No storage key provided to session.setItem")}if(!a){n.log("sessionStorage is not available.")}else{try{var r=JSON.stringify(t);sessionStorage.setItem(e,r)}catch(e){n.log("session.setItem failed.",e)}}}function l(e){if(!e){throw new Error("No storage key provided to session.removeItem")}if(!a){n.log("sessionStorage is not available.")}else{sessionStorage.removeItem(e)}}e.exports={getItem:o,setItem:s,removeItem:l}},function(e,t,r){"use strict";var a=r(1);var n=function(e){var t=new Image(1,1);t.style.display="none";t.style.position="absolute";t.style.left="-1px";t.style.top="-1px";t.src=e};function i(e){var t=a.buildUrlQueryString(e,false);var r="(https:\\/\\/)(([^\\.][^\\.]+).)(.*\\/)(.*)";var n=e.url.path.match(r);return"https://impressions."+n[4]+n[5]+t}function o(e){var t=i(e);return n(t)}e.exports={buildUrlForImpression:i,injectPixel:o}},function(r,n,e){var h,w,S;!function(e){var a=/iPhone/i,i=/iPod/i,o=/iPad/i,s=/\bAndroid(?:.+)Mobile\b/i,l=/Android/i,u=/\bAndroid(?:.+)SD4930UR\b/i,c=/\bAndroid(?:.+)(?:KF[A-Z]{2,4})\b/i,f=/Windows Phone/i,d=/\bWindows(?:.+)ARM\b/i,v=/BlackBerry/i,g=/BB10/i,p=/Opera Mini/i,b=/\b(CriOS|Chrome)(?:.+)Mobile/i,m=/Mobile(?:.+)Firefox\b/i;function y(e,t){return e.test(t)}function t(e){var t=e||("undefined"!=typeof navigator?navigator.userAgent:""),r=t.split("[FBAN");void 0!==r[1]&&(t=r[0]),void 0!==(r=t.split("Twitter"))[1]&&(t=r[0]);var n={apple:{phone:y(a,t)&&!y(f,t),ipod:y(i,t),tablet:!y(a,t)&&y(o,t)&&!y(f,t),device:(y(a,t)||y(i,t)||y(o,t))&&!y(f,t)},amazon:{phone:y(u,t),tablet:!y(u,t)&&y(c,t),device:y(u,t)||y(c,t)},android:{phone:!y(f,t)&&y(u,t)||!y(f,t)&&y(s,t),tablet:!y(f,t)&&!y(u,t)&&!y(s,t)&&(y(c,t)||y(l,t)),device:!y(f,t)&&(y(u,t)||y(c,t)||y(s,t)||y(l,t))||y(/\bokhttp\b/i,t)},windows:{phone:y(f,t),tablet:y(d,t),device:y(f,t)||y(d,t)},other:{blackberry:y(v,t),blackberry10:y(g,t),opera:y(p,t),firefox:y(m,t),chrome:y(b,t),device:y(v,t)||y(g,t)||y(p,t)||y(m,t)||y(b,t)}};return n.any=n.apple.device||n.android.device||n.windows.device||n.other.device,n.phone=n.apple.phone||n.android.phone||n.windows.phone,n.tablet=n.apple.tablet||n.android.tablet||n.windows.tablet,n}true&&r.exports&&"undefined"==typeof window?r.exports=t:true&&r.exports&&"undefined"!=typeof window?(r.exports=t(),r.exports.isMobile=t):true?!(w=[],h=e.isMobile=t(),S=typeof h==="function"?h.apply(n,w):h,S!==undefined&&(r.exports=S)):undefined}(this)}]);
//# sourceMappingURL=sdk.min.map